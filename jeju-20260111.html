<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¿Ÿå·å³¶èœœæœˆæ‰‹å¯«æ‰‹æœ­</title>
    <script src="https://cdn.tailwindcss.com/"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@300;500;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // å…¨åŸŸç‹€æ…‹åˆå§‹åŒ–ï¼Œé˜²æ­¢åœ¨ Firebase è¼‰å…¥å‰ updateUI å´©æ½°
        window.checklistStates = window.checklistStates || {};
        window.getCheckState = (itemId) => window.checklistStates[itemId] || false;

        let firebaseConfig = {};
        try {
            firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        } catch (e) { console.warn("Firebase config not found."); }

        if (firebaseConfig.apiKey) {
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getFirestore(app);
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'jeju-honeymoon';

            const initAuth = async () => {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            };

            onAuthStateChanged(auth, (user) => {
                if (user) {
                    const docRef = doc(db, 'artifacts', appId, 'users', user.uid, 'checklists', 'states');
                    onSnapshot(docRef, (snapshot) => {
                        if (snapshot.exists()) {
                            window.checklistStates = snapshot.data();
                            if (window.refreshCheckboxes) window.refreshCheckboxes();
                        }
                    });
                }
            });

            window.saveCheckState = async (itemId, isChecked) => {
                if (!auth.currentUser) return;
                window.checklistStates[itemId] = isChecked;
                const docRef = doc(db, 'artifacts', appId, 'users', auth.currentUser.uid, 'checklists', 'states');
                await setDoc(docRef, window.checklistStates, { merge: true });
            };

            initAuth();
        }
    </script>

    <style>
        :root {
            --color-primary: #4A443F;
            --color-accent-sage: #A6A890;
            --color-accent-rose: #C89F9C;
            --color-bg: #F9F7F4;
        }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--color-bg);
            color: var(--color-primary);
            overflow-x: hidden;
        }
        .font-serif-tc { font-family: 'Noto Serif TC', serif; }
        .paper-texture {
            position: fixed; inset: 0; opacity: 0.05; pointer-events: none;
            background-image: url("https://www.transparenttextures.com/patterns/handmade-paper.png");
            z-index: 50;
        }
        #bg-illustration-container {
            position: fixed; inset: 0; width: 100%; height: 100%; pointer-events: none; opacity: 0.08; transition: opacity 1s; z-index: 5;
        }
        .masking-tape {
            height: 2rem; width: 6rem; background-color: rgba(255, 255, 255, 0.4);
            border-left: 1px dashed rgba(0,0,0,0.05); border-right: 1px dashed rgba(0,0,0,0.05);
            box-shadow: 0 1px 2px rgba(0,0,0,0.05); transform: rotate(-2deg);
            clip-path: polygon(0% 0%, 100% 0%, 98% 50%, 100% 100%, 0% 100%, 2% 50%);
        }
        .handwritten-note {
            background-color: #FFFDF9; border: 1px solid #E9E6E2; padding: 1.5rem; border-radius: 1rem;
            font-family: 'Noto Serif TC', serif; min-height: 100px; width: 100%; resize: none; outline: none;
        }
        .fade-in { animation: fadeIn 0.7s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .day-btn.active { background-color: var(--color-accent-sage); border-color: var(--color-accent-sage); color: white; }
        .check-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.6rem 0; border-bottom: 1px dashed rgba(0,0,0,0.05); cursor: pointer; }
        .check-box { width: 1.25rem; height: 1.25rem; border: 1.5px solid var(--color-accent-sage); border-radius: 4px; transition: all 0.3s; flex-shrink: 0; }
        .check-box.checked { background-color: var(--color-accent-sage); position: relative; }
        .check-box.checked::after { content: 'âœ“'; color: white; font-size: 0.75rem; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); }
        .flow-arrow { display: flex; align-items: center; justify-content: center; color: var(--color-accent-sage); opacity: 0.4; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(5px); } }
        @media print { .no-print { display: none !important; } #itinerary-grid { display: block !important; } }
    </style>
</head>
<body>
    <div class="paper-texture"></div>
    <div id="bg-illustration-container"></div>

    <header class="max-w-6xl mx-auto pt-16 px-6 flex flex-col items-center relative z-10 text-center">
        <div class="flex items-center gap-4 mb-4">
            <div class="h-[1px] w-12 bg-black/10"></div>
            <i data-lucide="heart" class="text-[#C89F9C] fill-current w-6 h-6"></i>
            <div class="h-[1px] w-12 bg-black/10"></div>
        </div>
        <h1 class="text-3xl font-light tracking-[0.2em] mb-10 text-[#5D5751] font-serif-tc">Jeju Honeymoon Diary</h1>
        <div id="day-selector" class="flex flex-wrap justify-center gap-2 mb-10 px-4 no-print"></div>
        <button onclick="window.print()" class="no-print mb-10 flex items-center gap-2 text-xs font-medium text-[#A6A890] hover:text-[#C89F9C] transition-colors border-b border-dashed border-[#A6A890]/40 pb-1">
            <i data-lucide="printer" class="w-3 h-3"></i> åˆ—å°æ‰‹æœ­å‚™ä»½
        </button>
    </header>

    <main class="max-w-6xl mx-auto px-6 pb-32 relative z-10">
        <section id="day-header" class="mb-16 text-center fade-in"></section>
        <div id="itinerary-grid" class="flex flex-col gap-8 items-center"></div>
        <div id="note-section" class="max-w-2xl mx-auto mt-20 w-full fade-in"></div>
    </main>

    <div class="fixed bottom-10 left-1/2 -translate-x-1/2 z-50 no-print">
        <div class="bg-white/80 backdrop-blur-md border border-[#E9E6E2] px-8 py-4 rounded-full shadow-lg flex items-center gap-12 text-center">
            <button id="prev-btn" class="text-[#4A443F] hover:text-[#C89F9C] transition-colors"><i data-lucide="chevron-left" class="w-7 h-7"></i></button>
            <div class="flex flex-col items-center">
                <i data-lucide="book-open" class="text-[#A6A890] w-5 h-5 mb-0.5"></i>
                <span id="page-label" class="text-sm font-light tracking-[0.3em] text-[#5D5751]">PAGE.00</span>
            </div>
            <button id="next-btn" class="text-[#4A443F] hover:text-[#C89F9C] transition-colors"><i data-lucide="chevron-right" class="w-7 h-7"></i></button>
        </div>
    </div>

    <script>
        const itineraryData = [
            {
                id: 0, title: "Preparation Â· æº–å‚™æ¸…å–®", date: "Before Departure", theme: "æ‰“åŒ…èˆ‡èˆªç­è³‡è¨Š", bgType: "city", isChecklist: true,
                sections: [
                    { name: "èˆªç­è³‡è¨Š (è™èˆª)", items: ["å»ç¨‹ 1/11ï¼š06:40 â” 09:50", "å›ç¨‹ 1/18ï¼š10:50 â” 12:10"] },
                    { name: "æ ¸å¿ƒè­‰ä»¶", items: ["è­·ç…§", "åœ‹éš›é§•ç…§ (IDP)", "å°ç£é§•ç…§", "éŸ“å…ƒç¾é‡‘", "åœ‹å¤–åˆ·å¡ä¿¡ç”¨å¡"] },
                    { name: "é›»å­è¨­å‚™", items: ["éŸ“åœ‹ä¸Šç¶²å¡", "è½‰æ¥é ­ (Type C/F)", "è¡Œå‹•é›»æº", "å……é›»çµ„"] }
                ]
            },
            {
                id: 1, title: "Rental Â· æ¨‚å¤©ç§Ÿè»ŠæŒ‡å—", date: "2026 / 01 / 11", theme: "å–è»Šæµç¨‹èˆ‡é ç´„", bgType: "city", isRentalPage: true,
                websiteUrl: "https://www.lotterentacar.net/hp/chn/carLife/jejuAuto.do",
                sections: [
                    { name: "æ¥é§è»Šè³‡è¨Š", items: ["ç‡Ÿé‹: 06:00-23:00", "æœˆå°: æ©Ÿå ´ 1-1", "è»Šç¨‹: 15 åˆ†é˜"] },
                    { name: "å–è»Šæ¸…å–®", items: ["éŒ„å½±è¨˜éŒ„å¤–è§€", "ç¢ºèªæ²¹ç®±å…¨æ»¿", "æ ¸å°ä¿éšªåˆç´„"] }
                ],
                location: { name: "Lotte Jeju Auto House", search: "ë¡¯ë°ë Œí„°ì¹´ ì œì£¼ì˜¤í† í•˜ìš°ìŠ¤", desc: "è½åœ°å¾Œæ­ä¹˜æ¥é§è»Šå‰å¾€å–è»Šã€‚" }
            },
            {
                id: 2, title: "Day 1 Â· æŠµé”èˆ‡è¥¿éƒ¨å‡ºç™¼", date: "2026 / 01 / 11", theme: "è¥¿éƒ¨æµ·å²¸ç¾é£Ÿä¹‹æ—…", bgType: "north",
                stops: [
                    { name: "æ¨‚å¤©ç§Ÿè»Šå–è»Š", type: "äº¤é€š", ticket: "é ç´„å–è»Š", search: "ë¡¯ë°ë Œí„°ì¹´ ì œì£¼ì˜¤í† í•˜ìš°ìŠ¤", desc: "é–‹å•Ÿèœœæœˆè‡ªé§•æ—…ç¨‹ã€‚ğŸš—", icon: "car" },
                    { name: "é“é ­æ´å½©è™¹æµ·å²¸é“è·¯", type: "æ™¯é»", ticket: "å…è²»", search: "ë„ë‘ë™ ë¬´ì§€ê°œ í•´ì•ˆë„ë¡œ", desc: "å¿…æ‹å½©è‰²çŸ³å¡Šã€‚ğŸŒˆ", icon: "camera" },
                    { name: "æ¢¨æ¹–å°é¦¬ç‡ˆå¡”", type: "æ‰“å¡", ticket: "å…è²»", search: "ì´í˜¸í…Œìš° ë§ë“±ëŒ€", desc: "ç´…ç™½å°æœ›ç‡ˆå¡”ã€‚ğŸ", icon: "camera" },
                    { name: "å§Šå¦¹éºµæ¢", type: "ç¾é£Ÿ", ticket: "1è¬â‚©", search: "ìë§¤êµ­ìˆ˜", desc: "æ¿ƒéƒé»‘è±¬è‚‰æ¹¯éºµã€‚ğŸœ", icon: "utensils" },
                    { name: "Egyul æ©˜å­è›‹å¡”", type: "é»å¿ƒ", search: "ì—ê·œìš¸ ì´í˜¸í…Œìš°í•´ë³€ì ", desc: "æ¢¨æ¹–æµ·é‚Šç‰¹è‰²è›‹å¡”ã€‚ğŸ®", icon: "shopping-bag" },
                    { name: "æ–¯å¦ç¦åº¦å‡é…’åº— Check in", type: "ä½å®¿", search: "ìŠ¤íƒ í¬ë“œí˜¸í…”ì•¤ë¦¬ì¡°íŠ¸ ì œì£¼", desc: "å…ˆè¾¦ç†å…¥ä½æ”¾è¡Œæã€‚ğŸ¨", icon: "heart" },
                    { name: "Noraba æµ·é®®æ‹‰éºµ", type: "ç¾é£Ÿ", search: "ë…¸ë¼ë°”", desc: "è¶…äººæ°£çˆ†é‡æ‹‰éºµã€‚ğŸ¦€", icon: "utensils" },
                    { name: "æ¶¯æœˆç™½å¸¶é­š (ì• ì›”ê°ˆì¹˜ì•”í–‰ì–´ì‚¬)", type: "ç¾é£Ÿ", search: "ì• ì›”ê°ˆì¹˜ì•”í–‰ì–´ì‚¬", desc: "åº—åï¼šì• ì›”ê°ˆì¹˜ì•”í–‰ì–´ì‚¬ã€‚ğŸŸ", icon: "utensils" },
                    { name: "æ¼¢æ½­æ•£æ­¥è·¯ (í•œë‹´í•´ë³€)", type: "è‡ªç„¶", search: "í•œë‹´í•´ë³€", desc: "æœ€ç¾æµ·å²¸æ­¥é“ã€‚ğŸŒ¾", icon: "palmtree" },
                    { name: "æ˜¥å¤©å’–å•¡å»³ BOMNAL", type: "å’–å•¡", search: "ë´„ë‚ ì¹´í˜", desc: "æ¶¯æœˆè€å­—è™Ÿã€‚â˜•", icon: "coffee" },
                    { name: "Mumu æ¿Ÿå·é¸ç‰©åº—", type: "è³¼ç‰©", search: "ë¬´ë¬´ì œì£¼", desc: "è³ªæ„Ÿæ–‡å…·å°ç‰©ã€‚ğŸ", icon: "shopping-bag" },
                    { name: "è²· UMU å¸ƒä¸", type: "ç”œé»", search: "ìš°ë¬´", desc: "æ–‡é’å¿…è²·å¸ƒä¸ã€‚ğŸ®", icon: "shopping-bag" },
                    { name: "å›æ–¯å¦ç¦åº¦å‡é…’åº—", type: "ä¼‘æ¯", search: "ìŠ¤íƒ í¬ë“œí˜¸í…”ì•¤ë¦¬ì¡°íŠ¸ ì œì£¼", desc: "ç¬¬ä¸€æ™šå¥½çœ ã€‚ğŸŒ™", icon: "heart" }
                ]
            },
            {
                id: 3, title: "Day 2 Â· æ¼¢æ‹¿å±±èˆ‡ 98.1", date: "2026 / 01 / 12", theme: "é«˜åœ°æ™¯è‰²èˆ‡æ¥µé€Ÿ", bgType: "mountain",
                stops: [
                    { name: "æ–¯å¦ç¦é…’åº— Check out", type: "ä½å®¿", search: "ìŠ¤íƒ í¬ë“œí˜¸í…”ì•¤ë¦¬ì¡°íŠ¸ ì œì£¼", desc: "å‡ºç™¼å‰å¾€ä¸­éƒ¨ã€‚ğŸ¨", icon: "heart" },
                    { name: "Eorimork åœè»Šå ´æ‹ç…§", type: "æ™¯é»", search: "ì–´ë¦¬ëª©ì£¼ì°¨ì¥", desc: "æ¼¢æ‹¿å±±å…¥å±±å£å†¬æ™¯ã€‚â„ï¸", icon: "camera" },
                    { name: "æ¼¢æ‹¿å±± 1100 é«˜åœ°", type: "è‡ªç„¶", search: "1100ê³ ì§€", desc: "çœ‹éœ§æ·é›ªæ™¯ã€‚ğŸ”ï¸", icon: "mountain" },
                    { name: "æ¿Ÿå·æ¨‚å¤©é…’åº— Check in", type: "ä½å®¿", search: "ë¡¯ë°í˜¸í…” ì œì£¼", desc: "ä¸­æ–‡å€å¥¢è¯ä½å®¿ã€‚ğŸ¨", icon: "heart" },
                    { name: "Hello Kitty ä¸»é¡Œé¤¨", type: "ä¸»é¡Œ", search: "í—¬ë¡œí‚¤í‹°ì•„ì¼ëœë“œ", desc: "å°‘å¥³å¿ƒçˆ†ç™¼ã€‚ğŸ€", icon: "heart" },
                    { name: "981 Park è³½è»Š", type: "é«”é©—", search: "981íŒŒí¬", desc: "é‡åŠ›è³½è»Šç«¶é€Ÿã€‚ğŸï¸", icon: "car" },
                    { name: "è±šé­šå‰ç‡’è‚‰ (æ–°è¯åº—)", type: "ç¾é£Ÿ", search: "ëˆì–´ê¸¸ ì œì£¼ì‹ í™”ì›”ë“œë³¸ì ", desc: "é»‘è±¬è‚‰é¦–é¸ã€‚ğŸ¥©", icon: "utensils" },
                    { name: "å›æ¿Ÿå·æ¨‚å¤©é…’åº—", type: "ä¼‘æ¯", search: "ë¡¯ë°í˜¸í…” ì œì£¼", desc: "äº«å—é£¯åº—æ°›åœã€‚ğŸŒ™", icon: "heart" }
                ]
            },
            {
                id: 4, title: "Day 3 Â· è¥¿æ­¸æµ¦æ”¾é¬†", date: "2026 / 01 / 13", theme: "åœ°è³ªå¥‡è§€èˆ‡æ±—è’¸å¹•", bgType: "tangerine",
                stops: [
                    { name: "æ¿Ÿå·æ¨‚å¤©é…’åº— Check out", type: "ä½å®¿", search: "ë¡¯ë°í˜¸í…” ì œì£¼", desc: "å¾€å—ç§»å‹•ã€‚ğŸ¨", icon: "heart" },
                    { name: "å¤§æµ¦æŸ±ç‹€ç¯€ç†å¸¶", type: "è‡ªç„¶", ticket: "2000â‚©", search: "ëŒ€í¬ì£¼ìƒì ˆë¦¬ëŒ€", desc: "ç«å±±å²©å¥‡è§€ã€‚ğŸ—¿", icon: "mountain" },
                    { name: "å’–å•¡å»³ Gamtta nam", type: "å’–å•¡", search: "ê°ë”°ë‚¨", desc: "æ©˜å­åœ’é‡é¤æ„Ÿã€‚ğŸŠ", icon: "coffee" },
                    { name: "æ¿Ÿå·æ°´ä¸Šä¸–ç•Œ", type: "æ”¾é¬†", search: "ì œì£¼ì›Œí„°ì›”ë“œ", desc: "éŸ“å¼æ±—è’¸å¹•ã€‚ğŸŠ", icon: "waves" },
                    { name: "ä¸‰å§“ç©´æµ·é®®æ¹¯", type: "ç¾é£Ÿ", search: "ì‚¼ì„±í˜ˆí•´ë¬¼íƒ•", desc: "æ´»é«”æ¾æ¹ƒæµ·é®®ã€‚ğŸ™", icon: "utensils" },
                    { name: "æ¬£æ¬£é…’åº— Check in", type: "ä½å®¿", search: "ì‹ ì‹ í˜¸í…” ì„œê·€í¬", desc: "å¸‚ä¸­å¿ƒä¾¿åˆ©ã€‚ğŸ¨", icon: "heart" },
                    { name: "è¥¿æ­¸æµ¦å¶ä¾†å¸‚å ´", type: "å¸‚å ´", search: "ì„œê·€í¬ë§¤ì¼ì˜¬ë ˆì‹œì¥", desc: "è²·ä¼´æ‰‹ç¦®ã€‚ğŸ®", icon: "shopping-bag" }
                ]
            },
            {
                id: 5, title: "Day 4 Â· æ½›æ°´è‰‡èˆ‡å²åŠªæ¯”", date: "2026 / 01 / 14", theme: "æµ·åº•æ¢éšªèˆ‡ç™‚ç™’åœ’å€", bgType: "ocean",
                stops: [
                    { name: "æ¬£æ¬£é…’åº— Check out", type: "ä½å®¿", search: "ì‹ ì‹ í˜¸í…” ì„œê·€í¬", desc: "å‰å¾€æ±éƒ¨ã€‚ğŸ¨", icon: "heart" },
                    { name: "è¥¿æ­¸æµ¦æ½›æ°´è‰‡", type: "é«”é©—", ticket: "5.5è¬â‚©", search: "ì„œê·€í¬ì ìˆ˜í•¨", desc: "æµ·åº• 40 ç±³ã€‚âš“", icon: "waves" },
                    { name: "æ­£æˆ¿ç€‘å¸ƒ", type: "æ™¯é»", ticket: "2000â‚©", search: "ì •ë°©í­í¬", desc: "ç›´æ¥å…¥æµ·ç€‘å¸ƒã€‚ğŸŒŠ", icon: "waves" },
                    { name: "é»‘è±¬æµ·é®®ä¸‰åˆ", type: "ç¾é£Ÿ", search: "ì œì£¼ í‘ë¼ì§€ í•´ë¬¼ì‚¼í•©", desc: "æµ·é™¸æ¾æ¹ƒé¤ã€‚ğŸ¥˜", icon: "utensils" },
                    { name: "å²åŠªæ¯”å…¬åœ’", type: "æ‰“å¡", search: "ìŠ¤ëˆ„í”¼ê°€ë“ ", desc: "è¶…å¤§ç™‚ç™’åœ’å€ã€‚ğŸ¾", icon: "heart" },
                    { name: "æ˜Ÿå·´å…‹ (æ¾å ‚å…¬åœ’åº—)", type: "å’–å•¡", search: "ìŠ¤íƒ€ë²…ìŠ¤ ë”ì œì£¼ì†¡ë‹¹íŒŒí¬Rì ", desc: "çµ•ç¾æ™¯è‡´ã€‚â˜•", icon: "coffee" },
                    { name: "Donghwa Maeul (PB)", type: "ç”œé»", search: "íŒŒë¦¬ë°”ê²Œëœ¨ ë™í™”ë§ˆì„", desc: "ç‰¹è‰²çƒ˜ç„™ã€‚ğŸ¥–", icon: "shopping-bag" },
                    { name: "Koeop åŸå±±é…’åº— Check in", type: "ä½å®¿", search: "ì½”ì—…ì‹œí‹°í˜¸í…” ì„±ì‚°", desc: "é¢æœæ—¥å‡ºå³°ã€‚ğŸ¨", icon: "heart" }
                ]
            },
            {
                id: 6, title: "Day 5 Â· åŸå±±æµ·æ´‹", date: "2026 / 01 / 15", theme: "æ°´æ—é¤¨èˆ‡æ—¥å‡ºå³°", bgType: "sunrise",
                stops: [
                    { name: "Koeop åŸå±±é…’åº—", type: "ä½å®¿", search: "ì½”ì—…ì‹œí‹°í˜¸í…” ì„±ì‚°", desc: "å‡ºç™¼ã€‚ğŸ¨", icon: "heart" },
                    { name: "Aqua Planet æ°´æ—é¤¨", type: "é«”é©—", search: "ì•„ì¿ ì•„í”Œë¼ë„· ì œì£¼", desc: "æµ·åº•éš§é“è¡¨æ¼”ã€‚ğŸ³", icon: "waves" },
                    { name: "æ¶‰åœ°å¯æ”¯", type: "è‡ªç„¶", search: "ì„­ì§€ì½”ì§€", desc: "éŸ“åŠ‡ç†±æ‹æµ·å²¸ã€‚ğŸŒ¾", icon: "palmtree" },
                    { name: "åŸå±±æ—¥å‡ºå³°", type: "éºç”¢", ticket: "5000â‚©", search: "ì„±ì‚°ì¼ì¶œë´‰", desc: "ç™»é ‚ä¿¯ç°ã€‚ğŸŒ‹", icon: "mountain" },
                    { name: "Oreun å’–å•¡å»³", type: "å’–å•¡", search: "ì˜¤ë¥¸", desc: "æ¸…æ°´æ¨¡ç¾å­¸ã€‚â˜•", icon: "coffee" },
                    { name: "Chwihado é›œè²¨åº—", type: "è³¼ç‰©", search: "ì·¨í•˜ë„", desc: "ç²¾ç·»å°åº—ã€‚ğŸ", icon: "shopping-bag" },
                    { name: "Yeonmijeong (é®‘é­šé£¯)", type: "ç¾é£Ÿ", search: "ì—°ë¯¸ì •", desc: "åœ¨åœ°å¿…åƒã€‚ğŸš", icon: "utensils" },
                    { name: "å› Koeop åŸå±±é…’åº—", type: "ä¼‘æ¯", search: "ì½”ì—…ì‹œí‹°í˜¸í…” ì„±ì‚°", desc: "å¯§éœå¤œæ™šã€‚ğŸŒ™", icon: "heart" }
                ]
            },
            {
                id: 7, title: "Day 6 Â· ç‰›å³¶èˆ‡è²æœ", date: "2026 / 01 / 16", theme: "é›¢å³¶æ…¢æ´»èˆ‡å¿…åƒç”œé»", bgType: "udo",
                stops: [
                    { name: "Koeop åŸå±±é…’åº— Check out", type: "ä½å®¿", search: "ì½”ì—…ì‹œí‹°í˜¸í…” ì„±ì‚°", desc: "å›æ¿Ÿå·å¸‚ã€‚ğŸ¨", icon: "heart" },
                    { name: "ç‰›å³¶æ¼«éŠ", type: "é›¢å³¶", search: "ìš°ë„ë„í•­ì„ ì„ ì°©ì¥", desc: "ç’°å³¶æµªæ¼«æ™‚å…‰ã€‚ğŸš¢", icon: "ship" },
                    { name: "Abebe Bakery", type: "ç”œé»", search: "ì•„ë² ë²  ë² ì´ì»¤ë¦¬ ë¹„í‚¬ë¼", desc: "å¿…è²·å¥¶æ²¹åŒ…ã€‚ğŸ¥", icon: "shopping-bag" },
                    { name: "London Bagel Museum", type: "ååº—", search: "ëŸ°ë˜ë² ì´ê¸€ë®¤ì§€ì—„ ì œì£¼", desc: "æ’éšŠé¦–é¸ã€‚ğŸ¥¯", icon: "shopping-bag" },
                    { name: "Odeurang Bakery", type: "ç”œé»", search: "ì˜¤ë“œë‘ë² ì´ì»¤ë¦¬ í•¨ë•ì ", desc: "è’œå‘³åŒ…ã€‚ğŸ¥–", icon: "shopping-bag" },
                    { name: "æ©˜å­å±‹å’–å•¡å»³", type: "å’–å•¡", search: "ì¹´í˜ ë” ì½˜í…Œë‚˜ ì œì£¼", desc: "é€ å‹è¶…èŒã€‚ğŸŠ", icon: "coffee" },
                    { name: "æ©˜å­å†°æ·‡æ·‹ (ä¼‘æ½”åˆ©)", type: "ç”œé»", search: "íœ´ì¦ë¦¬ ì œì£¼ë³¸ì ", desc: "çµ•ç¾é€ å‹ã€‚ğŸ¦", icon: "utensils" },
                    { name: "é¾é ­å²©", type: "æ™¯é»", search: "ìš©ë‘ì•”", desc: "é¾å½¢å¥‡çŸ³ã€‚ğŸ²", icon: "mountain" },
                    { name: "æ¨‚å¤©åŸå¸‚é…’åº— Check in", type: "ä½å®¿", search: "ë¡¯ë°ì‹œí‹°í˜¸í…” ì œì£¼", desc: "å¸‚ä¸­å¿ƒä¾¿åˆ©ã€‚ğŸ¨", icon: "heart" }
                ]
            },
            {
                id: 8, title: "Day 7 Â· Shopping", date: "2026 / 01 / 17", theme: "å…ç¨…æ¡è²·èˆ‡æœ€çµ‚ç¾é£Ÿ", bgType: "city",
                stops: [
                    { name: "æ¨‚å¤©å…ç¨…åº—", type: "è³¼ç‰©", search: "ë¡¯ë°ë©´ì„¸ì  ì œì£¼ì ", desc: "ç²¾å“æ¡è³¼ã€‚ğŸ‘œ", icon: "shopping-bag" },
                    { name: "ç†Ÿæˆåˆ°ç¸½åº— (æ¿Ÿå·åº—)", type: "ç¾é£Ÿ", search: "ìˆ™ì„±ë„ ì œì£¼ë³¸ì ", desc: "æœ€å¼·é»‘è±¬è‚‰ã€‚ğŸ·", icon: "utensils" },
                    { name: "æ–°ç¾…å…ç¨…åº—", type: "è³¼ç‰©", search: "ì‹ ë¼ë©´ì„¸ì  ì œì£¼ì ", desc: "ç²¾å“è£œé½Šã€‚ğŸ‘œ", icon: "shopping-bag" },
                    { name: "ç”œç”œåœˆåº— (Knotted)", type: "ç”œé»", search: "ì œì£¼ ë…¸í‹°ë“œ", desc: "äººæ°£ç”œç”œåœˆã€‚ğŸ©", icon: "shopping-bag" },
                    { name: "Umu æ±é–€å¸‚å ´åº—", type: "ç”œé»", search: "ìš°ë¬´ ë™ë¬¸ì‹œì¥ì ", desc: "å†æ¬¡å…¥æ‰‹ã€‚ğŸ®", icon: "shopping-bag" },
                    { name: "ä¸ƒæ˜Ÿå•†åº—è¡—", type: "è³¼ç‰©", search: "ì¹ ì„±ë¡œì‡¼í•‘ê±°ë¦¬", desc: "æ½®æµé‹å‹•ã€‚ğŸ‘Ÿ", icon: "shopping-bag" },
                    { name: "æ±é–€å¸‚å ´", type: "å¸‚å ´", search: "ë™ë¬¸ì¬ë˜ì‹œì¥", desc: "å¤œå¸‚åƒå–ã€‚ğŸ®", icon: "shopping-bag" },
                    { name: "é»‘è±¬è‚‰ä¸€æ¢è¡—", type: "ç¾é£Ÿ", search: "í‘ë¼ì§€ê±°ë¦¬", desc: "æœ€å¾Œæ™šå®´ã€‚ğŸ¥©", icon: "utensils" },
                    { name: "å›æ¨‚å¤©åŸå¸‚é…’åº—", type: "ä¼‘æ¯", search: "ë¡¯ë°ì‹œí‹°í˜¸í…” ì œì£¼", desc: "æ•´ç†è¡Œæã€‚ğŸŒ™", icon: "heart" }
                ]
            },
            {
                id: 9, title: "Day 8 Â· æ­¸é€”", date: "2026 / 01 / 18", theme: "é‚„è»Šèˆ‡æ­¸å®¶", bgType: "city",
                stops: [
                    { name: "æ¨‚å¤©åŸå¸‚é…’åº— Check out", type: "ä½å®¿", search: "ë¡¯ë°ì‹œí‹°í˜¸í…” ì œì£¼", desc: "å‡ºç™¼æ©Ÿå ´ã€‚ğŸ¨", icon: "heart" },
                    { name: "æ¨‚å¤© Auto House é‚„è»Š", type: "é‚„è»Š", search: "ë¡¯ë°ë Œí„°ì¹´ ì œì£¼ì˜¤í† í•˜ìš°ìŠ¤", desc: "06:00 æº–æ™‚é‚„è»Šã€‚â›½", icon: "car" },
                    { name: "è™èˆªç™»æ©Ÿ", type: "æ­¸é€”", search: "ì œì£¼êµ­ì œê³µí•­", desc: "10:50 é£›å‘æ¡ƒåœ’ã€‚âœˆï¸", icon: "sun" }
                ]
            }
        ];

        let currentDay = 0;
        const bgIllustrations = {
            north: `<svg viewBox="0 0 800 600" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M100 500 Q 200 480 400 500 T 700 480" /><path d="M120 450 L 180 450" stroke-width="8" stroke-opacity="0.3" /><rect x="550" y="350" width="40" height="100" /><path d="M540 350 L 600 350 L 570 300 Z" /><circle cx="570" cy="280" r="10" /></svg>`,
            mountain: `<svg viewBox="0 0 800 600" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M100 550 L 300 200 L 500 450 L 650 300 L 800 550" /></svg>`,
            tangerine: `<svg viewBox="0 0 800 600" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="200" cy="200" r="30" /><circle cx="250" cy="280" r="25" /></svg>`,
            ocean: `<svg viewBox="0 0 800 600" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M0 400 Q 200 350 400 400 T 800 350" /></svg>`,
            sunrise: `<svg viewBox="0 0 800 600" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M50 500 L 200 450 L 400 150 L 600 450 L 750 500 Z" /></svg>`,
            city: `<svg viewBox="0 0 800 600" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="100" y="300" width="80" height="250" /></svg>`,
            udo: `<svg viewBox="0 0 800 600" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M300 400 L 500 400 L 550 350 L 250 350 Z" /></svg>`
        };

        function renderDaySelector() {
            const selector = document.getElementById('day-selector');
            selector.innerHTML = itineraryData.map(day => {
                let label = day.id === 0 ? 'Prep' : (day.id === 1 ? 'Rent' : 'D' + (day.id - 1));
                return `<button onclick="changeDay(${day.id})" class="day-btn relative px-3 py-1.5 transition-all rounded-full border border-black/10 text-[#4A443F]/60 hover:bg-[#E9E6E2] ${day.id === currentDay ? 'active' : ''}"><span class="text-[10px] font-bold uppercase">${label}</span></button>`;
            }).join('');
        }

        window.refreshCheckboxes = function() {
            document.querySelectorAll('.check-box').forEach(box => {
                const itemId = box.getAttribute('data-item-id');
                if (window.getCheckState(itemId)) box.classList.add('checked');
                else box.classList.remove('checked');
            });
        };

        function changeDay(id) { currentDay = id; updateUI(); window.scrollTo({ top: 0, behavior: 'smooth' }); }
        
        function updateUI() {
            const data = itineraryData.find(d => d.id === currentDay);
            renderDaySelector();
            const bgContainer = document.getElementById('bg-illustration-container');
            bgContainer.innerHTML = bgIllustrations[data.bgType] || '';

            document.getElementById('day-header').innerHTML = `
                <h2 class="text-3xl font-serif font-light italic mb-2 text-[#5D5751]">${data.title}</h2>
                <div class="flex flex-col items-center gap-1 mb-4"><span class="text-[#C89F9C] font-serif italic text-lg tracking-widest">${data.date}</span></div>
                <p class="text-[#A6A890] text-[10px] tracking-[0.3em] uppercase font-bold">â€” ${data.theme} â€”</p>`;

            const container = document.getElementById('itinerary-grid');
            if (data.isChecklist || data.isRentalPage) {
                let extraHTML = data.isRentalPage ? `<div class="mt-8 p-6 bg-white/90 rounded-[32px] border border-[#E9E6E2] w-full max-w-xl text-center"><h3 class="text-md font-bold mb-4">åœ°é»èˆ‡ç¶²ç«™</h3><div class="flex flex-col gap-2"><button onclick="window.open('https://map.naver.com/v5/search/${encodeURIComponent(data.location.search)}', '_blank')" class="w-full py-3 rounded-full bg-[#E9E6E2]/80 font-bold text-xs">é–‹å•Ÿ Naver Map</button><button onclick="window.open('${data.websiteUrl}', '_blank')" class="w-full py-3 rounded-full bg-[#A6A890]/10 font-bold text-xs">é ç´„å®˜ç¶²</button></div></div>` : "";
                container.innerHTML = `<div class="w-full max-w-xl bg-white/90 backdrop-blur-sm rounded-[40px] p-8 shadow-sm border border-[#E9E6E2] fade-in"><div class="flex flex-col gap-8">
                    ${data.sections.map(section => `<div><div class="flex items-center gap-3 mb-4"><div class="h-[2px] w-6 bg-[#C89F9C]"></div><h3 class="text-md font-bold text-[#5D5751]">${section.name}</h3></div><div class="flex flex-col gap-1">
                    ${section.items.map((item, idx) => {
                        const itemId = `${data.id}-${section.name}-${idx}`;
                        return `<div class="check-item group" onclick="if(window.saveCheckState){ window.saveCheckState('${itemId}', this.querySelector('.check-box').classList.toggle('checked')); }">
                            <div class="check-box ${window.getCheckState(itemId) ? 'checked' : ''}" data-item-id="${itemId}"></div>
                            <span class="text-sm text-[#8E8781] font-light">${item}</span>
                        </div>`;
                    }).join('')}</div></div>`).join('')}</div></div>${extraHTML}`;
            } else {
                container.innerHTML = data.stops.map((stop, index) => `<div class="w-full max-w-2xl flex flex-col items-center gap-8"><div class="w-full group bg-white/90 backdrop-blur-sm rounded-[32px] overflow-hidden shadow-sm border border-[#E9E6E2] flex flex-col md:flex-row fade-in">
                    <div class="md:w-2/5 aspect-video bg-[#F1F1F1]/50 relative p-4 flex items-center justify-center">
                        <i data-lucide="${stop.icon || 'map-pin'}" class="w-10 h-10 text-[#A6A890]"></i>
                        <div class="absolute top-4 left-4 z-20 flex flex-col items-center"><span class="text-[8px] font-bold uppercase">Step</span><span class="text-xl font-serif italic text-[#C89F9C]">${(index + 1).toString().padStart(2, '0')}</span></div>
                    </div>
                    <div class="md:w-3/5 p-6 flex flex-col justify-center text-center md:text-left">
                        <div class="flex items-center justify-center md:justify-between mb-2"><span class="text-[10px] font-bold text-[#A6A890] uppercase tracking-widest">${stop.type}</span>${stop.ticket ? `<span class="text-[8px] font-bold text-[#C89F9C] border px-2 py-0.5 rounded-full">${stop.ticket}</span>` : ''}</div>
                        <h3 class="text-xl font-light mb-2 text-[#5D5751]">${stop.name}</h3><p class="text-[#8E8781] text-xs leading-relaxed mb-4 italic">ã€Œ ${stop.desc} ã€</p>
                        <button onclick="window.open('https://map.naver.com/v5/search/${encodeURIComponent(stop.search)}', '_blank')" class="w-full py-2.5 rounded-full bg-[#E9E6E2]/80 text-xs font-bold">å°è¦½</button>
                    </div></div>
                    ${index < data.stops.length - 1 ? `<div class="flow-arrow"><i data-lucide="chevrons-down" class="w-5 h-5"></i></div>` : `<div class="flex flex-col items-center gap-2 opacity-30 mt-4"><div class="h-1 w-8 bg-[#A6A890] rounded-full"></div><span class="text-[8px] font-bold uppercase">End Day</span></div>`}</div>`).join('');
            }
            lucide.createIcons();
            document.getElementById('page-label').innerText = data.id === 0 ? 'PAGE.PREP' : (data.id === 1 ? 'PAGE.RENT' : `PAGE.0${data.id-1}`);
            document.getElementById('prev-btn').disabled = currentDay === 0;
            document.getElementById('next-btn').disabled = currentDay === itineraryData.length - 1;
        }

        window.onload = () => { updateUI(); };
        document.getElementById('prev-btn').onclick = () => { if (currentDay > 0) { currentDay--; updateUI(); } };
        document.getElementById('next-btn').onclick = () => { if (currentDay < itineraryData.length - 1) { currentDay++; updateUI(); } };
    </script>
</body>
</html>